(function(a){a.fn.ribbonSlider=function(l){var f={auto:true,delay:3000,heightRatio:0.5625,opacity:0.5,scalePercentage:0.85,speed:2000},j=false,b=null;function c(m){return m.is("ul, ol")}function h(o){if(!a("#rrs-c").length){var p='<div id="rrs-s"><div id="rrs-c">',n='<div id="rrs-p">',m='<div id="rrs-n">';o.wrap(p);a("#rrs-s").prepend(n).append(m).hover(function(){j=true;clearTimeout(b)},function(){j=false});o.clone().removeAttr("id").appendTo("#rrs-p, #rrs-n");a("#rrs-p a, #rrs-n a").removeAttr("href")}}function i(m){if(f.auto&&!j){g(m);b=setTimeout(function(n){g(n)},f.delay);setTimeout(function(n){i(n)},f.delay)}else{setTimeout(function(n){i(n)},f.delay)}}function g(p){if(!a("#rrs-s ul:animated").length){var n=a("#rrs-p ul"),o=a("#rrs-c ul"),m=a("#rrs-n ul");n.animate({marginLeft:-((n.find("li:first").width()*2)-n.parent().width())},f.speed,function(){n.find("li:first").appendTo(n);n.css("margin-left",-(n.find("li:first").width()-n.parent().width()))});o.animate({marginLeft:-((o.find("li:first").width()*2)-o.parent().width())},f.speed,function(){o.find("li:first").appendTo(o);o.css("margin-left",0)});m.animate({marginLeft:-(m.find("li:first").width())},f.speed,function(){m.find("li:first").appendTo(m);m.css("margin-left",0)})}}function d(p){if(!a("#rrs-s ul:animated").length){var n=a("#rrs-p ul"),o=a("#rrs-c ul"),m=a("#rrs-n ul");n.find("li:last").prependTo(n);n.css("margin-left",n.css("margin-left").replace("px","")-n.find("li:first").width());n.animate({marginLeft:-(n.find("li:first").width()-n.parent().width())},f.speed);o.find("li:last").prependTo(o);o.css("margin-left",o.css("margin-left").replace("px","")-o.find("li:first").width());o.animate({marginLeft:0},f.speed);m.find("li:last").prependTo(m);m.css("margin-left",m.css("margin-left").replace("px","")-m.find("li:first").width());m.animate({marginLeft:0},f.speed)}}function k(p){var o=p.parent().parent(),m=o.width(),n=m*f.heightRatio;a("#rrs-s").css("position","relative").find("*").removeAttr("style");a("#rrs-c").css({width:m,height:n,overflow:"hidden",position:"relative"}).find("ul").css({width:m*a("#rrs-c li").length}).find("li").css({"float":"left",height:"100%"}).find("img").css("width",a("#rrs-c").width());if(m<a(window).width()){a("#rrs-p").click(function(){d(p)}).hover(function(){a(this).stop().animate({opacity:1},"slow")},function(){a(this).stop().animate({opacity:f.opacity},"slow")}).css({width:(a(window).width()-m)/2,height:n*f.scalePercentage,overflow:"hidden",position:"absolute",left:-((a(window).width()-m)/2),top:(n-(n*f.scalePercentage))/2,opacity:f.opacity,cursor:"pointer",display:"block"}).find("ul").css({width:(m*f.scalePercentage)*p.find("li").length,marginLeft:-((m*f.scalePercentage)-((a(window).width()-m)/2))}).find("li").css({"float":"left",width:(m*f.scalePercentage)}).find("img").css("width",(m*f.scalePercentage));a("#rrs-n").click(function(){g(p)}).hover(function(){a(this).stop().animate({opacity:1},"slow")},function(){a(this).stop().animate({opacity:f.opacity},"slow")}).css({width:(a(window).width()-m)/2,height:m*f.scalePercentage,overflow:"hidden",position:"absolute",right:-((a(window).width()-m)/2),top:(n-(n*f.scalePercentage))/2,opacity:f.opacity,cursor:"pointer",display:"block"}).find("ul").css({width:(m*f.scalePercentage)*p.find("li").length}).find("li").css({"float":"left",width:(o.width()*f.scalePercentage)}).find("img").css("width",(m*f.scalePercentage))}else{a("#rrs-p, #rrs-n").css("display","none")}}function e(m){h(m);k(m);a("#rrs-c li:first").appendTo("#rrs-c ul");a("#rrs-n li:first").appendTo("#rrs-n ul");a("#rrs-n li:first").appendTo("#rrs-n ul");setTimeout(function(n){i(n)},f.delay)}return this.each(function(){var m=a(this);if(c(m)){if(l){a.extend(f,l)}e(m);a(window).resize(function(){k(m)})}else{alert("Responsive Ribbon Slider only works with UL or OL elements")}})}}(jQuery));