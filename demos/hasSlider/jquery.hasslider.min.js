/* hasSlider | mattkersley */(function(e){function r(e){return e.is("ul, ol")}function i(e){e.settings.slideshow&&!e.paused&&(e.timer=setTimeout(function(){c(e)},e.settings.animationDelay))}function s(e){e.animated?e.animated=!1:e.animated=!0}function o(t){t.pages!==null&&t.pages.find("a").each(function(){e(this).index()===t.targetPage.index()?e(this).addClass("active"):e(this).removeAttr("class")})}function u(e){e.currentPage=e.targetPage;e.targetPage=null}function a(e){if(!e.animated&&e.currentPage.index()!==e.targetPage.index()){o(e);s(e);e.settings.beforeAnimation();e.targetPage.css({zIndex:4}).stop().animate({opacity:1},e.settings.animationSpeed,function(){u(e);e.settings.afterAnimation();e.items.css({zIndex:2,opacity:0});e.currentPage.css({opacity:1});s(e)})}}function f(e){if(!e.animated&&e.currentPage.index()!==e.targetPage.index()){o(e);s(e);e.settings.beforeAnimation();var t=e.targetPage.index();e.settings.slideDirection==="horizontal"&&e.list.animate({marginLeft:-(e.inner.width()*t)},e.settings.animationSpeed,function(){u(e);e.settings.afterAnimation();s(e)});e.settings.slideDirection==="vertical"&&e.list.animate({marginTop:-(e.inner.height()*t)},e.settings.animationSpeed,function(){u(e);e.settings.afterAnimation();s(e)})}}function l(e){var t=e.currentPage.prev();t.length?e.targetPage=e.currentPage.prev():e.targetPage=e.items.last();switch(e.settings.animation){case"crossfade":a(e);break;case"slide":f(e)}}function c(e){var t=e.currentPage.next();t.length?e.targetPage=e.currentPage.next():e.targetPage=e.items.first();switch(e.settings.animation){case"crossfade":a(e);break;case"slide":f(e)}i(e)}function h(t,n){var r={};t.items.each(function(){e(this).index()===n&&(r=e(this))});return r}function p(t){t.outer.mouseenter(function(){t.paused=!0;window.clearTimeout(t.timer)}).mouseleave(function(){t.paused=!1;i(t)});if(t.settings.navDirectional){t.navPrev.click(function(){l(t)});t.navNext.click(function(){c(t)})}t.pages!==null&&t.pages.find("a").click(function(){if(!t.animated){var n=e(this).index();t.targetPage=h(t,n);switch(t.settings.animation){case"crossfade":a(t);break;case"slide":f(t)}}})}function d(t){var r='<div class="hs-prevnext">';r+='<a class="hs-prev">'+t.settings.prevText+"</a>";r+='<a class="hs-next">'+t.settings.nextText+"</a>";r+="</div>";e(r).prependTo(t.outer);t.nav=e("#"+t.settings.namespace+"-slider-"+n+" .hs-prevnext");t.navPrev=e("#"+t.settings.namespace+"-slider-"+n+" .hs-prev");t.navNext=e("#"+t.settings.namespace+"-slider-"+n+" .hs-next")}function v(t){e('<div class="hs-pages">').prependTo(t.outer);t.pages=e("#"+t.settings.namespace+"-slider-"+n+" .hs-pages");t.items.each(function(n){e("<a>"+(n+1)+"</a>").data("index",n).appendTo(t.pages)})}function m(e){var t=0;e.hasImages?t=e.outer.width()/e.aspectRatio:t=e.items.height();e.inner.css("height",t);e.items.css("height",t);e.outer.css("height",t)}function g(e){switch(e.settings.animation){case"crossfade":e.items.css({zIndex:2,opacity:0,position:"absolute"}).first().css({zIndex:3,opacity:1});break;case"slide":if(e.settings.slideDirection==="horizontal"){e.items.css({"float":"left",width:e.inner.width()});e.list.css({width:e.inner.width()*e.items.length,marginLeft:-(e.currentPage.index()*e.inner.width())})}e.settings.slideDirection==="vertical"&&e.list.css({marginTop:-(e.currentPage.index()*e.inner.height())})}}function y(t){var r='<div id="'+t.settings.namespace+"-slider-"+n+'" class="'+t.settings.namespace+'-slider">';r+='<div class="hs-inner">';t.list.wrap(r);t.outer=e("#"+t.settings.namespace+"-slider-"+n);t.inner=e("#"+t.settings.namespace+"-slider-"+n+" .hs-inner");t.outer.css("max-width",t.settings.maxWidth);t.aspectRatio=t.outer.width()/t.items.outerHeight();m(t);t.items.each(function(t){e(this).data("index",t)});if(t.settings.navPages){v(t);t.pages!==null&&t.pages.find("a:first").addClass("active")}t.settings.navDirectional&&d(t);p(t);g(t);n+=1}var t={namespace:"hs",slideshow:!0,animation:"crossfade",slideDirection:"horizontal",animationSpeed:700,animationDelay:3e3,navPages:!0,navDirectional:!0,prevText:"&#9664;",nextText:"&#9654;",maxWidth:1170,beforeAnimation:function(){},afterAnimation:function(){}},n=0;e.fn.hasSlider=function(n){if(r(e(this))){var s={list:e(this),items:e(this).find(">li"),settings:e.extend({},t,n),outer:null,inner:null,pages:null,nav:null,navPrev:null,navNext:null,paused:!1,animated:!1,currentPage:null,targetPage:null,timer:null,aspectRatio:null,hasImages:!1};s.currentPage=s.items.first();s.list.find("img:last").length&&(s.hasImages=!0);if(s.hasImages&&document.cookie.indexOf("hasSlider")===-1)s.list.find("img:last").load(function(){y(s)});else{document.cookie="hasSlider=1";y(s)}i(s)}else window.alert("hasSlider only works with <ul> or <ol> elements");e(window).resize(function(){g(s);m(s)})}})(jQuery);